[[Runnable]]
## ğŸ” LangChain Core çš„å®šä½

- `langchain-core` æ˜¯ LangChain çš„åŸºç¡€æŠ½è±¡å±‚ï¼Œä¸ä¾èµ–ä»»ä½•ç¬¬ä¸‰æ–¹æ¨¡å‹æˆ–å¹³å°ã€‚å®ƒå®šä¹‰äº†æ•´ä¸ªç”Ÿæ€ä¸­æ‰€æœ‰ç»„ä»¶åº”éµå¾ªçš„æ¥å£å’Œåè®®ã€‚([LangChain](https://python.langchain.com/api_reference/core/index.html "langchain-core: 0.3.78 â€”  LangChain  documentation"))
    
- å®ƒåŒ…æ‹¬ï¼š**å¯è¿è¡Œå•å…ƒ (Runnables / Runnable æ¥å£)**ã€**æç¤º / Prompt æ¨¡æ¿ (PromptTemplate ç­‰)**ã€**è¾“å‡ºè§£æ (OutputParser)**ã€**æ¶ˆæ¯ / Chat / LLM æŠ½è±¡ç±» (BaseLanguageModel / BaseChatModel ç­‰)**ã€**å·¥å…· / Tool æŠ½è±¡** ç­‰ã€‚([LangChain](https://python.langchain.com/api_reference/core/index.html "langchain-core: 0.3.78 â€”  LangChain  documentation"))
    
- æ ¸å¿ƒç›®æ ‡ï¼šè®©åç»­çš„ `langchain`ã€`langchain-openai`ã€`langgraph` ç­‰åŒ…éƒ½èƒ½åŸºäºè¿™äº›æŠ½è±¡è¿›è¡Œä¸€è‡´çš„ç»„åˆä¸æ‰§è¡Œã€‚
    

---

## ğŸ§± æ ¸å¿ƒæ¨¡å—ä¸ä¸»è¦æ¥å£

ä¸‹é¢æ˜¯ `langchain-core` ä¸­ä¸€äº›å…³é”®æ¨¡å—ä¸æ¦‚å¿µï¼Œä»¥åŠå®ƒä»¬çš„èŒè´£å’Œç›¸äº’å…³ç³»ï¼š

| æ¨¡å— / æ¦‚å¿µ                              | ä¸»è¦æ¥å£ / ç±»                                                                                     | è´£ä»» / åŠŸèƒ½                      | è¯´æ˜ /æ³¨æ„ç‚¹                                                                                                                                                                                   |
| ------------------------------------ | -------------------------------------------------------------------------------------------- | ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Runnables / Runnable**             | `Runnable`, `RunnableSequence`, `RunnableParallel`, `RunnableBranch` ç­‰                       | æŠ½è±¡â€œå¯æ‰§è¡Œå•å…ƒâ€ï¼Œæ”¯æŒç»„åˆã€æµå¼ã€å¹¶è¡Œã€åˆ†æ”¯ç­‰æ‰§è¡Œæ–¹å¼ | è¿™æ˜¯æ ¸å¿ƒçš„æ‰§è¡Œå±‚æŠ½è±¡ï¼Œå‡ ä¹æ‰€æœ‰ Chain / Agent / Graph æœ€ç»ˆéƒ½ä½œä¸º Runnable æ¥è°ƒåº¦æ‰§è¡Œã€‚([LangChain](https://python.langchain.com/api_reference/core/index.html "langchain-core: 0.3.78 â€”  LangChain  documentation")) |
| **Prompt / PromptTemplate**          | `BasePromptTemplate`, `ChatPromptTemplate`, `StringPromptValue`, `ChatPromptValueConcrete` ç­‰ | å®šä¹‰â€œå¦‚ä½•æŠŠè¾“å…¥è½¬æˆæ¨¡å‹èƒ½æ¥æ”¶çš„ promptâ€     | PromptTemplate æ˜¯æŠŠç»“æ„åŒ–è¾“å…¥ï¼ˆå˜é‡ï¼‰å¡«è¿›æ¨¡æ¿åå½¢æˆå…·ä½“ prompt                                                                                                                                                |
| **Messages / Chat Message**          | `BaseMessage`, `ChatMessage`, `AIMessage`, `HumanMessage`, `SystemMessage` ç­‰                 | æŠ½è±¡å¯¹è¯æ¶ˆæ¯çš„ç»“æ„                    | åœ¨ chat æ¨¡å‹åœºæ™¯ä¸‹ï¼Œç”¨æ¶ˆæ¯ä½œè¾“å…¥ / è¾“å‡ºå•ä½                                                                                                                                                                |
| **Language Models / Chat Models æŠ½è±¡** | `BaseLanguageModel`, `BaseChatModel`                                                         | å®šä¹‰è°ƒç”¨æ¨¡å‹çš„æ ‡å‡†æ¥å£                  | é«˜å±‚æ¨¡å‹å°è£…ï¼ˆå¦‚ OpenAIï¼ŒAnthropicï¼‰ä¼šç»§æ‰¿è¿™äº›æ¥å£                                                                                                                                                         |
| **Output Parsers**                   | `BaseOutputParser`, `BaseLLMOutputParser`, `JsonOutputParser` ç­‰                              | æŠŠæ¨¡å‹çš„â€œè‡ªç”±æ–‡æœ¬è¾“å‡ºâ€è§£ææˆç»“æ„åŒ–æ•°æ®         | ä¾‹å¦‚æŠŠ JSON å­—ç¬¦ä¸²è§£ææˆ dictã€æŠŠåˆ—è¡¨å½¢å¼çš„è¾“å‡ºå˜æˆ Python list ç­‰                                                                                                                                             |
| **Tools / Tool æŠ½è±¡**                  | `BaseTool`, `StructuredTool` ç­‰                                                               | æŠ½è±¡â€œæ¨¡å‹å¯ä»¥è°ƒç”¨çš„å¤–éƒ¨å‡½æ•° / å·¥å…·â€         | ä¾‹å¦‚æ£€ç´¢å™¨ã€è®¡ç®—å™¨ã€API è°ƒç”¨ç­‰ï¼Œéƒ½å¯ä»¥é€šè¿‡ Tool æ¥å…¥                                                                                                                                                           |
| **Retrievers**                       | `BaseRetriever`                                                                              | æŠ½è±¡â€œä»æ–‡æ¡£é›†åˆ / å‘é‡åº“ä¸­æ£€ç´¢ç›¸å…³æ–‡æ¡£â€       | åœ¨æ£€ç´¢å¢å¼ºï¼ˆRAGï¼‰åœºæ™¯ä¸‹ä½¿ç”¨                                                                                                                                                                           |
| **Stores / å­˜å‚¨æŠ½è±¡**                    | `BaseStore`, `InMemoryStore`, `InMemoryByteStore`                                            | æŠ½è±¡é”®å€¼ / byte å­˜å‚¨               | å¯ç”¨äºç¼“å­˜ã€çŠ¶æ€å­˜å‚¨ç­‰ç”¨é€”                                                                                                                                                                             |
| **Structured Query / æŸ¥è¯¢è¡¨è¾¾å¼**         | `StructuredQuery`, `Expr`, `Comparison` ç­‰                                                    | ç”¨äºå°†é€»è¾‘æŸ¥è¯¢è¡¨è¾¾æˆç»“æ„åŒ–å½¢å¼              | åœ¨ä¸€äº›ç´¢å¼• / æ£€ç´¢å™¨æ¥å£ä¸­ç”¨äºè¿‡æ»¤æˆ–å¤æ‚æ£€ç´¢                                                                                                                                                                   |
| **Callbacks / äº‹ä»¶ / è·Ÿè¸ª**              | `BaseCallbackHandler`, `CallbackManager`, `RunManager` ç­‰                                     | æä¾›â€œæ‰§è¡Œè¿‡ç¨‹â€çš„é’©å­æœºåˆ¶ï¼ˆæ—¥å¿—ã€ç›‘æ§ã€è°ƒè¯•ï¼‰      | ç”¨äºä¸­é—´çŠ¶æ€è·Ÿè¸ªã€ç›‘æ§ã€å¯è§†åŒ–ç­‰æ‰©å±•                                                                                                                                                                        |
| **Exceptions / é”™è¯¯å¤„ç†**                | `LangChainException`, `OutputParserException`, `TracerException` ç­‰                           | å®šä¹‰æ•´ä¸ª core å±‚å¯èƒ½å‡ºç°çš„æ ‡å‡†é”™è¯¯         | åœ¨æ‰©å±•è‡ªå®šä¹‰ç»„ä»¶æ—¶ï¼ŒæŒ‰è¿™äº›é”™è¯¯ç±»å‹æŠ›å‡ºå¯ä»¥ä¿è¯ä¸€è‡´æ€§                                                                                                                                                                |

---

## ğŸ”„ å„æ ¸å¿ƒæŠ½è±¡ä¹‹é—´çš„å…³ç³»ï¼ˆæ‰§è¡Œæµç¨‹è§†å›¾ï¼‰

ä¸‹é¢æ˜¯ä¸€ä¸ªç®€åŒ–çš„æ‰§è¡Œæµç¨‹ï¼ˆpipelineï¼‰è§†è§’ï¼Œå¸®åŠ©ä½ ç†è§£è¿™äº›æ ¸å¿ƒæŠ½è±¡æ˜¯å¦‚ä½•åä½œçš„ï¼š

1. **è¾“å…¥å˜é‡ / PromptTemplate**
    
    - ç”¨æˆ·æä¾›ç»“æ„åŒ–è¾“å…¥ï¼ˆå¦‚ `{"topic": "AI åœ¨é‡‘è"}`
        
    - PromptTemplate æ ¹æ®æ¨¡æ¿æŠŠè¿™äº›å˜é‡å¡«å…¥ç”Ÿæˆä¸€ä¸ªå…·ä½“æç¤ºæ–‡æœ¬ï¼ˆpromptï¼‰
        
2. **Runnable / æ‰§è¡Œå•å…ƒ**
    
    - Prompt â†’ æ¨¡å‹è°ƒç”¨ â†’ å¾—åˆ°åŸå§‹å“åº”ï¼ˆraw outputï¼‰
        
    - è¿™ä¸ªæ‰§è¡Œå•å…ƒä¸€èˆ¬å°±æ˜¯ä¸€ä¸ª `Runnable` æˆ–ä¸€ä¸² `RunnableSequence`
        
3. **æ¨¡å‹è°ƒç”¨ï¼ˆLanguage Model æŠ½è±¡å±‚ï¼‰**
    
    - `BaseLanguageModel` / `BaseChatModel` ç­‰æ¥æ”¶ prompt æˆ– messagesï¼Œå‘é€è¯·æ±‚åˆ°å…·ä½“æ¨¡å‹ï¼ˆå¦‚ OpenAIï¼‰
        
    - è¿”å›ä¸€äº›ç»“æœç»“æ„ï¼Œå¦‚ `LLMResult` / `ChatResult` / `ChatGeneration`
        
4. **Output Parser è§£æ**
    
    - æ¨¡å‹è¾“å‡ºé€šå¸¸æ˜¯è‡ªç”±æ–‡æœ¬ï¼ŒOutputParser å°†å…¶è§£æä¸ºç»“æ„åŒ–æ•°æ®ï¼ˆæ¯”å¦‚ dictã€listã€Pydantic å¯¹è±¡ç­‰ï¼‰
        
5. **Tool / Retriever è°ƒç”¨ï¼ˆå¯é€‰ï¼‰**
    
    - å¦‚æœæ¨¡å‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­éœ€è¦è°ƒç”¨å¤–éƒ¨å·¥å…·ï¼ˆå¦‚æ£€ç´¢ã€APIï¼‰ï¼š
        
        - è¿™äº›å·¥å…·ä¼šè¢«æŠ½è±¡ä¸º `BaseTool` æˆ– `StructuredTool`
            
        - Runnable åœ¨æ‰§è¡Œæ—¶å¯èƒ½ä¼šè§¦å‘å·¥å…·è°ƒç”¨ï¼Œå†å°†ç»“æœåµŒå…¥æµç¨‹ä¸­ç»§ç»­æ‰§è¡Œ
            
6. **Callbacks / Tracing**
    
    - åœ¨æ‰§è¡Œå„ä¸ªé˜¶æ®µï¼Œç³»ç»Ÿå¯ä»¥è§¦å‘ callback äº‹ä»¶ï¼ˆå¦‚â€œæ¨¡å‹è°ƒç”¨å¼€å§‹ï¼ç»“æŸâ€â€œtool è°ƒç”¨â€â€œè¾“å‡ºè§£æâ€ç­‰ï¼‰
        
    - è¿™æ ·å¯ä»¥ç”¨äºæ—¥å¿—ã€ç›‘æ§ã€è°ƒè¯•ã€å¯è§†åŒ–
        
7. **State / Store / Cacheï¼ˆå¯é€‰ï¼‰**
    
    - åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œéœ€è¦æŠŠä¸­é—´ç»“æœæˆ–çŠ¶æ€å­˜ä¸‹æ¥ï¼Œç”¨äºé‡ç”¨ã€ç¼“å­˜æˆ–è·¨æ­¥ä¼ é€’
        
    - è¿™æ—¶å€™å¯ç”¨ `BaseStore`ã€`InMemoryStore` ç­‰ä½œä¸ºå­˜å‚¨æŠ½è±¡
        

---

## âœ… é‡ç‚¹ç†è§£ä¸å­¦ä¹ å»ºè®®

ä» `langchain-core` çš„ç»“æ„æ¥çœ‹ï¼Œä»¥ä¸‹å‡ æ–¹é¢æ˜¯ä½ åœ¨å­¦ä¹ å’Œæ‰©å±•æ—¶ä¸€å®šè¦é‡ç‚¹æŒæ¡çš„ï¼š

- **Runnable / æ‰§è¡ŒæŠ½è±¡**ï¼šå‡ ä¹æ‰€æœ‰æµç¨‹æœ€ç»ˆéƒ½è¦è½¬åŒ–ä¸º Runnableï¼Œç†è§£å®ƒçš„ç»„åˆèƒ½åŠ›ï¼ˆä¸²è¡Œ / å¹¶è¡Œ / åˆ†æ”¯ï¼‰éå¸¸å…³é”®
    
- **Prompt ä¸ Message æŠ½è±¡**ï¼šè¦ç†è§£ â€œPromptTemplate + Messageâ€ åœ¨ä¸åŒæ¨¡å‹ç±»å‹ï¼ˆæ–‡æœ¬æ¨¡å‹ / èŠå¤©æ¨¡å‹ï¼‰ä¸‹çš„é€‚é…æ–¹å¼
    
- **è¾“å‡ºè§£æ (OutputParser)**ï¼šæ¨¡å‹è¾“å‡ºåƒå·®ä¸‡åˆ«ï¼Œä¸€ä¸ªå¥½çš„è§£æå™¨èƒ½æ˜¾è‘—æå‡ç³»ç»Ÿç¨³å®šæ€§
    
- **Tool ä¸ Retriever æŠ½è±¡**ï¼šæŠŠå¤–éƒ¨èƒ½åŠ›ï¼ˆæ£€ç´¢ã€æ•°æ®åº“ã€APIï¼‰ä»¥ç»Ÿä¸€æ–¹å¼æ¥å…¥æ ¸å¿ƒæµç¨‹
    
- **Callbacks / Trace / ç®¡ç†æµç¨‹**ï¼šæ‰§è¡Œè¿‡ç¨‹ä¸­æ’å…¥ç›‘æ§ / æ—¥å¿— / å¯è§†åŒ–é’©å­ï¼Œæ˜¯å¼€å‘ / è°ƒè¯• / ç›‘æ§ç³»ç»Ÿå¿…ä¸å¯å°‘çš„èƒ½åŠ›
    
